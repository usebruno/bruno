meta {
  name: json content-type
  type: http
  seq: 1
}

post {
  url: https://echo.usebruno.com
  body: none
  auth: none
}

tests {
  await test("raw body mode with json content-type", async () => {
    await bru.sendRequest({
      url: "https://echo.usebruno.com",
      method: "POST",
      headers: {
        "content-type": "application/json"
      },
      body: {
        mode: "raw",
        raw: JSON.stringify({x:1})
      }
    }, (error, response) => {
      expect(response?.data).to.eql({ x: 1 })
    })
  });
  
  
  await bru.sendRequest({
    url: "https://echo.usebruno.com",
    method: "POST",
    headers: {
      "content-type": "application/json"
    },
    body: {
      mode: "raw",
      raw: JSON.stringify({x:1})
    }
  }, (error, response) => {
    test("application/json content-type with raw body mode in bru.sendRequest", () => {
      expect(response?.data).to.eql({ x: 1 })
    });
  });
}
