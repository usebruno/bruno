meta {
  name: query
  type: http
  seq: 2
}

get {
  url: {{host}}/query?foo={{pong}}
  body: none
  auth: none
}

query {
  foo: {{pong}}
}

auth:awsv4 {
  accessKeyId: a
  secretAccessKey: b
  sessionToken: c
  service: d
  region: e
  profileName: f
}

vars:pre-request {
  m4: true
  pong: pong
}

assert {
  res.status: eq 200
  ~res.body: eq {{pong}}
}

script:pre-request {
  const project = 'foo'
  const roles = ('abc, xyz'.split(",")).map(element => {
    return element.trim();
  });
  
  var project_roles = [];
  
  for (let i in roles) {
    project_roles.push("\""+project+"_"+roles[i]+"\"");
  }
  
  bru.setVar("pong", JSON.stringify([1,2,3,4]));
}

tests {
  test("should ping pong", function() {
    const data = res.getBody();
    expect(data).to.equal(bru.getVar("pong"));
  });
}

docs {
  # API Documentation
  
  ## Introduction
  
  Welcome to the API documentation for [Your API Name]. This document provides instructions on how to make requests to the API and covers available authentication methods.
  
  ## Authentication
  
  Before making requests to the API, you need to authenticate your application. [Your API Name] supports the following authentication methods:
  
  ### API Key
  
  To use API key authentication, include your API key in the request headers as follows:
  
  ```http
  GET /api/endpoint
  Host: api.example.com
  Authorization: Bearer YOUR_API_KEY
  
}
