meta {
  name: collection-folder-vars
  type: http
  seq: 6
}

get {
  url: {{host}}/ping
  body: none
  auth: none
}

script:hooks {
  bru.hooks.http.onBeforeRequest(({ req }) => {
    // These may return undefined if not set, which is valid
    bru.setVar('collection-var', bru.getCollectionVar('testCollectionVar') || 'not-set');
    bru.setVar('folder-var', bru.getFolderVar('testFolderVar') || 'not-set');
    bru.setVar('request-var', bru.getRequestVar('testRequestVar') || 'not-set');
  });
}

tests {
  test("bru.getCollectionVar - callable in hook", function() {
    // Just verify the function is callable and returns expected type
    const val = bru.getVar('collection-var');
    expect(val).to.be.a('string');
  });
  
  test("bru.getFolderVar - callable in hook", function() {
    const val = bru.getVar('folder-var');
    expect(val).to.be.a('string');
  });
  
  test("bru.getRequestVar - callable in hook", function() {
    const val = bru.getVar('request-var');
    expect(val).to.be.a('string');
  });
}

